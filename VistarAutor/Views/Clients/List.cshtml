@using Microsoft.Ajax.Utilities
@using VistarAutor.Models
@using VistarAutor.Models.Client
@using VistarAutor.Models.Person
@using ModelState = System.Web.ModelBinding.ModelState
@model IEnumerable<VistarAutor.Models.Client.Client>


@{
    ViewBag.Title = GlobalStrings.CONTACTS;
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="row" style="height: 48px">
    <div class="col-md-4">
    </div>
    <div class="col-md-8"></div>
</div>
<div class="row">
<div class="col-md-4">
    <div class="tab-content">
        <div class="tab-pane active" id="tab1">
            <table class="table table-striped small">
                @foreach (var client in Model)
                {
                    <tr style="background-color: lavender">
                        <td><i class="glyphicon glyphicon-home"></i></td>
                        <td></td>
                        <td>
                            <strong>
                                @Html.ActionLink(client.Name, "List", new {id = client.Id}, new {style = "color:darkslategray"})
                            </strong>
                        </td>
                        <td style="color: darkslategray">@client.FullName</td>
                    </tr>
                    <!-- foreach (var contact in client.MyPersons)
                    {
                    <tr>
                        <td></td>
                        <td><i class="glyphicon glyphicon-user"></i></td>
                        <td>Html.ActionLink(contact.Name + " " + contact.LastName, "List", null, new {style = "color: grey"})</td>
                        <td>
                            if (contact.PersonPhones.Any())
                            {
                            <h5>
                                <span class="label label-default">
                                                <span class="glyphicon glyphicon-earphone" aria-hidden="true"></span>
                                        +contact.PersonPhones.First().CountryCode.Code
                                        contact.PersonPhones.First().CityCod
                                        contact.PersonPhones.First().NamberPhone
                                        </span>
                            </h5>
                            }
                        </td>
                    </tr>
                    }
                    -->
                }
            </table>
        </div>
        <div class="tab-pane" id="tab2">
            <p>Привет, я в Разделе 2.</p>
        </div>
        <div class="tab-pane" id="tab3">
            <p>Привет, я в Разделе 3.</p>
        </div>
    </div>
</div>

<!-- Раздел подробно по клиенту -->
<div class="col-md-8">
<div class="thumbnail" style="position: fixed; width: 50%">
<div class="tab-content">
    <table class="table table-condensed small">
        <tr style="background-color: lavender;">
            <td style="vertical-align: middle">
                <span class="glyphicon glyphicon-home" aria-hidden="true"></span>
            </td>
            <td style="vertical-align: middle">
                <strong>
                    @ViewBag.ClientRez.FullName
                </strong>
            </td>
            <td style="text-align: right">
                <div class="btn-group" role="group">
                    <a href="#cont1" type="button" data-toggle="tab" class="btn btn-default btn-xs" aria-label="PensilBtn">
                        <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                    </a>
                    <a href="#cont2" type="button" data-toggle="tab" class="btn btn-default btn-xs">
                        <span class=" glyphicon glyphicon-comment" aria-hidden="true">
                                        </span>
                    </a>
                    <a href="#cont3" type="button" data-toggle="tab" class="btn btn-default btn-xs">
                        <span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span>
                    </a>
                    <a href="#cont4" type="button" data-toggle="tab" class="btn btn-default btn-xs">
                        <span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span>
                    </a>&nbsp;&nbsp;
                </div>

                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-default btn-xs" aria-label="PensilBtn">
                        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                    </button>
                    <button type="button" class="btn btn-default btn-xs" aria-label="PensilBtn">
                        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                    </button>
                    <button type="button" class="btn btn-default btn-xs" aria-label="DellBtn">
                        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                    </button>
                </div>
            </td>

        </tr>

    </table>


    <div class="tab-pane active" id="cont1">
        <table class="table table-condensed small">
            <tr style="background-color: lavender;">
                <td colspan="6">
                    <button type="button" class="btn btn-default btn-xs" aria-label="DellBtn"
                            data-toggle="modal" data-target="#clientModal">
                        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                        &nbsp;<strong>@GlobalStrings.CONTACTS</strong>
                    </button>
                </td>
            </tr>
            @foreach (MyPerson contact in ViewBag.ClientRez.MyPersons)
            {
                <tr>
                    <td style="vertical-align: middle">
                        <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                    </td>
                    <td style="vertical-align: middle">
                        @contact.Name
                        @contact.LastName
                    </td>
                    <td style="vertical-align: middle">
                        <ul>
                            @foreach (PersonPhone phone in contact.PersonPhones)
                            {
                                <li style="list-style-type: none">
                                    <h5>
                                        <span class="label label-default">
                                                        <span class="glyphicon glyphicon-earphone" aria-hidden="true"></span>
                                                        @if (contact.PersonPhones.Any())
                                                        {


                                                            @GlobalStrings.PLUS
                                                            ;
                                                            @phone.CountryCode.Code
                                                            ;<text></text>
                                                            @phone.CityCod
                                                            ;<text></text>
                                                            @phone.NamberPhone
                                                            ;


                                                        }
                                                    </span>
                                    </h5>
                                </li>
                            }
                        </ul>
                    </td>

                    <td style="vertical-align: middle">
                        <ul>
                            <li style="list-style-type: none">
                                @foreach (PersonMail mail in contact.PersonMails)
                                {
                                    <h5>
                                        <span class="label label-default">
                                                        <span class="glyphicon glyphicon-envelope" aria-hidden="true"></span>
                                                        @contact.PersonMails.First().Mail
                                                    </span>
                                    </h5>
                                }
                            </li>
                        </ul>
                    </td>

                    <td style="vertical-align: middle">
                        <h5>
                            <span class="label label-default">
                                            <span class="glyphicon glyphicon-tag" aria-hidden="true"></span>
                                            @if (contact.Position != null)
                                            {
                                                @contact.Position.Name
                                                ;
                                            }
                                        </span>
                        </h5>
                    </td>
                    <td style="text-align: right; vertical-align: middle">
                        <button type="button" class="btn btn-default btn-xs" aria-label="PensilBtn">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                        </button>
                        <button type="button" class="btn btn-default btn-xs" aria-label="DellBtn">
                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                        </button>
                    </td>
                </tr>
                <tr style="background-color: lightgray">
                    <td colspan="6" style="vertical-align: middle">
                        <span class="glyphicon glyphicon-comment" aria-hidden="true"></span>&nbsp;<strong>@contact.Note</strong>
                    </td>
                </tr>
            }
        </table>
    </div>

    <div class="tab-pane" id="cont2">
        @Html.Partial("PartialClient")
    </div>

    <div class="tab-pane" id="cont3">
        <table class="table table-condensed small">
            <tr style="background-color: lavender;">
                <td colspan="3">
                    <button type="button" class="btn btn-default btn-xs" aria-label="DellBtn">
                        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                        &nbsp;<strong>@GlobalStrings.REKVIZIT</strong>
                    </button>
                </td>
            </tr>
            @foreach (ClientNote note in ViewBag.Notes)
            {
                <tr>
                    <td>@note.DateTime.ToString("d")</td>
                    <td>@note.Text</td>
                    <td style="vertical-align: top; text-align: right">
                        <button type="button" class="btn btn-default btn-xs" aria-label="PensilBtn">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                        </button>
                        <button type="button" class="btn btn-default btn-xs" aria-label="DellBtn">
                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                        </button>
                    </td>
                </tr>
            }

        </table>
    </div>
    <div class="tab-pane" id="cont4">
        <table class="table table-condensed small">
            <tr style="background-color: lavender;">
                <td colspan="3">
                    <button type="button" class="btn btn-default btn-xs" aria-label="DellBtn">
                        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                        &nbsp;<strong>@GlobalStrings.REKVIZIT</strong>
                    </button>
                </td>
            </tr>
        </table>
    </div>
</div>
</div>
</div>
</div>


<!---------------------------------------------------------->

<div class="container" style="background-color: white; position: fixed; top: 50px">
    <ul class="nav nav-tabs">
        <li class="active"><a href="#tab1" data-toggle="tab">@GlobalStrings.CONTACTS</a></li>
        <li><a href="#tab2" data-toggle="tab">@GlobalStrings.LAST</a></li>
        <li><a href="#tab3" data-toggle="tab">@GlobalStrings.SELECT</a></li>
    </ul>
    <form class="form-inline" style="position: fixed; top: 53px; left: 50%">
        <!-- Split button -->
        <div class="btn-group">
            <button type="button" class="btn btn-default">@GlobalStrings.SORT</button>
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                <span class="caret"></span>
                <span class="sr-only">Toggle Dropdown</span>
            </button>
            <ul class="dropdown-menu" role="menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li><a href="#">Separated link</a></li>
            </ul>
        </div>
        <input type="text" class="form-control" id="exampleInputName2" placeholder=@GlobalStrings.SERCH>
        <button type="submit" class="btn">@GlobalStrings.SERCH</button>
    </form>

</div>

<!---- Модальные окна -->

<div class="modal fade" id="messModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
            <div class="container-fluid">
@using (Ajax.BeginForm("PartialClient", new AjaxOptions {UpdateTargetId = "cont2", HttpMethod ="POST"}))
{
    <div class="row">
        <div class="col-md-12">
            <div class="form-group">
                <label for="date-name" class="control-label">@GlobalStrings.DATE:</label>
                <input type="text" name="DateTime" class="form-control" style="width: auto" id="date-name" value=@DateTime.Now.ToString("d")>
            </div>
             @Html.Hidden("ClientId", (int)ViewBag.ClientRez.Id)
            <div class="form-group">
                <label for="message-text" class="control-label">Message:</label>
                <textarea class="form-control" id="message-text" name="Text"></textarea>
            </div>
        </div>
        <div class="row">
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="submit" value="Save" class="btn btn-primary" aria-hidden="true">Save changes</button>
            </div>
        </div>
    </div>
}
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="clientModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    @Html.Partial("DialogClientPartial")
</div>


<!---------------------->

